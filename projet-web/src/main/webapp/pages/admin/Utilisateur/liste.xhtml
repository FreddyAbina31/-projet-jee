<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/template/page-standard.xhtml">

	<ui:define name="titre">Liste des comptes</ui:define>

	<ui:define name="contenu">

		<h:form>
			<div class="container mt-3">
				<table class="table table-striped">
					<thead>
						<tr>
							<th scope="col">Pseudo</th>
							<th scope="col">Rôles</th>
							<th scope="col">Actions</th>
						</tr>
					</thead>
					<tbody>
						<ui:repeat value="#{modelCompte.liste}" var="item"
							varStatus="status">
							<tr class="#{status.even ? 'even' : 'odd'}">
								<td>#{item.pseudo}</td>
								<td><ui:repeat value="#{item.roles}" var="role"
										varStatus="roleStatus">
                                        #{utilAppli.getLibelléDeRole(role)}#{not roleStatus.last ? ', ' : ''}
                                    </ui:repeat></td>
								<td><h:button outcome="formulaire?id=#{item.id}"
										styleClass="btn btn-primary" title="Modifier">
										<h:graphicImage name="images/modifier.png"
											styleClass="image-action" />
									</h:button> <h:commandButton action="#{modelUtilisateur.supprimer(item)}"
										value="Supprimer"
										onclick="return confirm('Confirmez-vous la suppression ?')"
										styleClass="btn btn-danger" title="Supprimer">
										<f:ajax render="@form" execute="@form" />
										<h:graphicImage name="images/supprimer.png"
											styleClass="image-action" />
									</h:commandButton></td>
							</tr>
						</ui:repeat>
					</tbody>
				</table>
			</div>
			<br />
			<h:button value="Ajouter" outcome="formulaire"
				styleClass="btn btn-primary" />
		</h:form>

	</ui:define>

</ui:composition>
